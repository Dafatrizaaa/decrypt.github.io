<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Lua Deobfuscator (Yasuscator)</title>
<style>
body{
  background:#222;
  color:#fff;
  font-family:monospace;
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh
}
.box{
  width:600px;
  padding:20px;
  background:#333;
  border-radius:8px;
  box-shadow:0 0 20px #000
}
input,button,textarea{
  width:100%;
  margin-top:10px;
  padding:10px;
  background:#111;
  color:#0f0;
  border:1px solid #555
}
button{
  background:#ff8f10;
  color:#000;
  font-weight:bold;
  cursor:pointer
}
textarea{
  height:220px
}
</style>
</head>
<body>

<div class="box">
  <h2>Lua Deobfuscator</h2>

  <input type="file" id="file">
  <input type="text" id="key" placeholder="Decrypt Key">
  <button onclick="deobfuscate()">Deobfuscate</button>

  <textarea id="output" placeholder="Result..."></textarea>
</div>

<script>
function deobfuscate(){
  const file = document.getElementById("file").files[0];
  const key = document.getElementById("key").value;
  if(!file || !key) return alert("File & key required!");

  const reader = new FileReader();
  reader.readAsText(file);

  reader.onload = () => {
    const data = reader.result;

    // Ambil ARRAY ANGKA
    const match = data.match(/\{([\d,\s]+)\}/);
    if(!match) return alert("Encrypted array not found!");

    const numbers = match[1].split(",").map(n=>parseInt(n.trim()));
    let k = 0;
    let out = "";

    for(let i=0;i<numbers.length;i++){
      const dec = numbers[i] - key.charCodeAt(k);
      out += String.fromCharCode(dec);
      k++;
      if(k >= key.length) k = 0;
    }

    document.getElementById("output").value = out;

    // Auto download
    const blob = new Blob([out], {type:"text/plain"});
    const a = document.createElement("a");
    a.href = URL.createObjectURL(blob);
    a.download = "deobfuscated.lua";
    a.click();
  }
}
</script>

</body>
</html>
